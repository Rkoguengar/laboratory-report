---
## Front matter
title: "Отчёт по лабораторной работе №2"
subtitle: "Управление пользователями и группами"
author: "Ришард Когенгар"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить представление о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.

# Ход выполнения

# Ход выполнения

## Переключение учётных записей пользователей и настройка прав доступа

1. Выполнен вход в систему под обычной учётной записью пользователя **rishard** и открыт терминал.  
   Для определения текущего пользователя использована команда `whoami`, в результате чего на экран выведено имя пользователя **rishard**.

   Для получения расширенной информации об учётной записи выполнена команда `id`.  
   В выводе отображены:
   - `uid=1000(rishard)` — уникальный идентификатор пользователя;
   - `gid=1000(rishard)` — идентификатор основной группы;
   - `groups=1000(rishard), 10(wheel)` — перечень групп, в которые входит пользователь;
   - контекст безопасности SELinux.  
   Наличие группы **wheel** указывает на возможность использования команды `sudo`.

   ![Определение текущего пользователя и его идентификаторов](Screenshot_1.png)

2. Выполнено переключение на учётную запись администратора с помощью команды `su`.  
   После ввода пароля пользователя **root** выполнена команда `id`.

   Полученный вывод подтверждает работу под суперпользователем:
   - `uid=0(root)` и `gid=0(root)` — идентификаторы администратора;
   - пользователь входит исключительно в группу **root**, что соответствует стандартной конфигурации системы.

   ![Переключение на пользователя root](Screenshot_1.png)

3. Выполнен выход из учётной записи **root** с помощью команды `exit`, после чего управление возвращено пользователю **rishard**.

4. Для безопасного просмотра и редактирования файла конфигурации прав доступа выполнена команда `sudo -i visudo`.  
   Использование утилиты **visudo** обязательно, так как она:
   - блокирует файл `/etc/sudoers` от одновременного редактирования;
   - проверяет синтаксис перед сохранением;
   - предотвращает ошибки конфигурации, которые могут привести к потере административного доступа.

   ![Просмотр файла /etc/sudoers через visudo](Screenshot_2.png)

5. В файле `/etc/sudoers` обнаружена строка `%wheel ALL=(ALL) ALL`.  
   Данная запись означает, что все пользователи, входящие в группу **wheel**, имеют право выполнять любые команды от имени любого пользователя с использованием `sudo`.  
   Группа **wheel** применяется для централизованного управления административными привилегиями.

6. Создан пользователь **alice**, включённый в группу **wheel**, с помощью команды `sudo -i useradd -G wheel alice`.  
   Проверка выполнена командой `id alice`, вывод которой подтверждает принадлежность пользователя к группе **wheel**.

7. Для пользователя **alice** установлен пароль командой `sudo -i passwd alice`.

8. Выполнено переключение на учётную запись **alice** с помощью команды `su alice`.

9. Под учётной записью **alice** создан пользователь **bob** командой `sudo useradd bob`.  
   После этого установлен пароль командой `sudo passwd bob`.  
   Проверка с помощью `id bob` показала, что пользователь **bob** входит только в свою основную группу и не обладает административными правами.

   ![Создание пользователей alice и bob](Screenshot_3.png)

## Создание учётных записей пользователей и настройка окружения

10. Выполнен вход под учётной записью **root** и открыт для редактирования файл `/etc/login.defs`.  
    В файле изменены параметры:
    - `CREATE_HOME yes` — включено автоматическое создание домашнего каталога пользователя;
    - `USERGROUPS_ENAB no` — отключено создание персональной группы с именем пользователя, используется группа **users**.

    ![Редактирование файла login.defs](Screenshot_4.png)

11. Выполнен переход в каталог `/etc/skel`.  
    В каталоге созданы директории **Pictures** и **Documents**, которые автоматически копируются в домашние каталоги новых пользователей.

12. В файле `/etc/skel/.bashrc` добавлена строка `export EDITOR=/usr/bin/vim`.  
    Данная настройка задаёт текстовый редактор **vim** в качестве редактора по умолчанию для пользователей системы.

    ![Изменение файла .bashrc в /etc/skel](Screenshot_5.png)

13. Под учётной записью **alice** создан пользователь **carol**, после чего для него установлен пароль.

14. Выполнен вход под пользователем **carol** и проверены параметры учётной записи и содержимое домашнего каталога.  
    Установлено, что:
    - основной группой пользователя является **users** с идентификатором `gid=100`;
    - в домашнем каталоге автоматически созданы директории **Pictures** и **Documents**.

    ![Проверка домашнего каталога пользователя carol](Screenshot_6.png)

15. Выполнен анализ записи пользователя **carol** в файле `/etc/shadow`.  
    Запись содержит зашифрованный пароль, дату последней смены пароля и параметры срока его действия.

16. Изменены параметры срока действия пароля пользователя **carol**:
    - минимальный срок использования пароля — 30 дней;
    - предупреждение об истечении срока — за 3 дня;
    - максимальный срок действия пароля — 90 дней.  
    Повторная проверка в файле `/etc/shadow` подтвердила внесённые изменения.

    ![Изменение параметров пароля пользователя carol](Screenshot_7.png)

17. Выполнена проверка наличия идентификатора пользователя **alice** в файлах `/etc/passwd`, `/etc/shadow` и `/etc/group`.  
    Пользователь **alice** присутствует во всех трёх файлах.  
    Проверка для пользователя **carol** показала, что его идентификатор присутствует не во всех файлах, что соответствует ожидаемому результату.

## Работа с группами

18. Под учётной записью **alice** созданы группы **main** и **third**.

19. Пользователи добавлены в группы:
    - **alice** и **bob** — в группу **main**;
    - **carol** — в группу **third**.

20. Проверка с помощью команды `id carol` показала, что:
    - основной группой пользователя является **users**;
    - вторичной группой является **third**.

21. Проверка остальных пользователей подтвердила:
    - пользователь **alice** состоит в группах **alice**, **wheel** и **main**;
    - пользователь **bob** состоит в группах **bob** и **main**.

    ![Проверка групп пользователей](Screenshot_8.png)

## Вывод

В ходе выполнения лабораторной работы были изучены и отработаны основные операции управления пользователями и группами в операционной системе Linux. Выполнено переключение между учётными записями обычного пользователя и администратора, рассмотрены принципы работы идентификаторов пользователей и групп, а также механизм предоставления административных прав через группу **wheel** и утилиту **sudo**.  

Были созданы новые учётные записи пользователей и группы, настроены параметры их домашнего окружения и политики управления паролями, а также проверено корректное применение заданных настроек. Полученные результаты подтверждают правильную конфигурацию системы и соответствие выполненных действий требованиям задания.


# Контрольные вопросы

**1. При помощи каких команд можно получить информацию о номере (идентификаторе), назначенном пользователю Linux, и о группах, в которые включён пользователь?**

Для получения информации об идентификаторе пользователя и его группах используются следующие команды:  
`id` — выводит UID, GID и список всех групп пользователя. Пример: `id alice`  
`groups` — отображает перечень групп, в которые входит пользователь. Пример: `groups alice`  
`getent passwd <user>` — позволяет получить UID и GID пользователя из системной базы.  

**2. Какой UID имеет пользователь root? При помощи какой команды можно узнать UID пользователя? Приведите примеры.**

Пользователь **root** всегда имеет идентификатор **UID = 0**.  
Узнать UID пользователя можно с помощью команды `id`.  

Примеры:  
`id root` — выводит UID=0 для пользователя root  
`id alice` — выводит UID обычного пользователя  

**3. В чём состоит различие между командами su и sudo?**

Команда `su` используется для полного переключения на другую учётную запись, чаще всего на root, с вводом пароля этого пользователя.  
Команда `sudo` позволяет выполнить отдельную команду с повышенными привилегиями, не выполняя полный вход под root, при этом используется пароль текущего пользователя (если он имеет соответствующие права).

**4. В каком конфигурационном файле определяются параметры sudo?**

Основные параметры работы команды `sudo` определяются в конфигурационном файле `/etc/sudoers`, а также во включаемых файлах каталога `/etc/sudoers.d`.

**5. Какую команду следует использовать для безопасного изменения конфигурации sudo?**

Для безопасного изменения конфигурации sudo следует использовать команду `visudo`, так как она проверяет синтаксис файла перед сохранением и предотвращает его повреждение.

**6. Если вы хотите предоставить пользователю доступ ко всем командам администрирования системы через sudo, членом какой группы он должен быть?**

Пользователь должен быть членом группы **wheel**, так как для неё в файле `/etc/sudoers` обычно задано правило `%wheel ALL=(ALL) ALL`.

**7. Какие файлы и каталоги можно использовать для определения параметров, которые будут применяться при создании учётных записей пользователей? Приведите примеры настроек.**

При создании учётных записей используются следующие файлы и каталоги:  
`/etc/login.defs` — задаёт параметры создания пользователей (например, `CREATE_HOME`, `USERGROUPS_ENAB`).  
`/etc/skel` — шаблон домашнего каталога пользователя (файлы `.bashrc`, `.bash_profile`, каталоги `Documents`, `Pictures`).  

**8. Где хранится информация о первичной и дополнительных группах пользователей Linux? Поясните такие записи для пользователя alice.**

Информация о пользователях и группах хранится в файлах:  
`/etc/passwd` — содержит UID и идентификатор основной группы (GID);  
`/etc/group` — содержит сведения о дополнительных группах;  
`/etc/shadow` — содержит данные о паролях и их сроках действия.  

Для пользователя **alice**:  
- в `/etc/passwd` указаны её UID и основной GID;  
- в `/etc/group` указано членство в дополнительных группах, например **wheel** и **main**.

**9. Какие команды можно использовать для изменения информации о пароле пользователя (например, о сроке действия пароля)?**

Для управления параметрами пароля используются команды:  
`passwd` — изменение пароля пользователя;  
`passwd -x` — установка максимального срока действия пароля;  
`passwd -n` — минимальный срок использования пароля;  
`passwd -w` — срок предупреждения об истечении пароля;  
`chage` — расширенное управление сроками действия пароля.

**10. Какую команду следует использовать для прямого изменения информации в файле /etc/group и почему?**

Для безопасного изменения файла `/etc/group` следует использовать команду `vigr`, так как она обеспечивает проверку целостности файла и блокировку от одновременного редактирования, что предотвращает повреждение системной базы групп.
